# PCA

这两天倒腾了一下数据，内存总是爆掉，经李煌师兄提醒后，把前面所有的中间变量删掉，最后终于成功了，得到了日频的 managed portfolio 数据。遂进行了以下尝试。


## PCA with managed portfolios

对组合数据计算 PCA 得到主成分因子，接着令每一个组合与主成分计算协方差分解，然后构建组合计算收益率。

结果是非常 amazing 的，**所有频率组合均不显著，并且 $\alpha$ 大小不超过 0.1**，基本相当于什么都没有，这里就不放表格了。

## PCA with stocks
 
接着，我又调转船头，还是回过头来计算股票的 PCA，

- 首先是因为要填充缺失值，所以我提高了进行频率计算的标准，原来是过去五年缺失值不少于630，我改成了800。
- 其次，我对缺失值进行了截面均值的填充，因为想着反正 PCA 要 demean，填充均值的影响会比0小一些。

<div class = 'centertable'>


|           | CAPM              | FF3               | FF5                | FF5 + Momentum     |
|:----------|:------------------|:------------------|:-------------------|:-------------------|
| Intercept | 0.45***<br>(0.15) | 0.37***<br>(0.13) | 0.49***<br>(0.14)  | 0.58***<br>(0.16)  |
| mktrf     | -0.02<br>(0.04)   | -0.1***<br>(0.03) | -0.12***<br>(0.03) | -0.14***<br>(0.04) |
| smb       |                 | 0.5***<br>(0.06)  | 0.42***<br>(0.06)  | 0.42***<br>(0.06)  |
| hml       |                 | 0.05<br>(0.1)     | 0.05<br>(0.1)      | -0.02<br>(0.11)    |
| rmw       |                 |                 | -0.34***<br>(0.09) | -0.31***<br>(0.08) |
| cma       |                 |                 | 0.01<br>(0.15)     | 0.06<br>(0.14)     |
| umd       |                 |                 |                  | -0.13**<br>(0.06)  |
| Adj. R2   | -0.0              | 0.19              | 0.23               | 0.25               |

</div>

结果与 market 可以说是**几乎完全一致**，看来第一个因子确实非常像 market。

## Plan


1. 在 PCA 中直接填充截面均值可能有点误差，查了一下资料，也许可以考虑 PPCA，是一种比较知名的针对于 PCA 填充缺失值的方法。
2. 不过因为我提高了筛选的标准，缺失值影响不大，实际上我觉得改变填充方法并不能获得太好的提升。还是回到如何考虑多因子的问题上，沿着之前的思路思考，每个因子在不同频率上的贡献是不同的，如何利用好这一点。



